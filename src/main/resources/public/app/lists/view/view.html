<loading-cycle ng-if="updating"></loading-cycle>
<div flex class="list-view" ng-if="!updating">
    <form ng-if="!loading" id="createNewItemForm" role="form" layout="row" name="createNewItemForm" ng-submit="createNewItem()">
        <md-autocomplete id ="newItemAutocomplete" flex
                         md-selected-item="selectedArticle"
                         md-selected-item-change="createNewItem($event)"
                         md-search-text="ctrl.newItem.article.name"
                         md-items="article in articles | filter: {name: ctrl.newItem.article.name} | limitTo: 5"
                         md-item-text="article.name"
                         md-min-length="1"
                         md-autofocus
                         ng-disabled="creating"
                         placeholder="Neuer Posten">
            <md-item-template>
                <span md-highlight-text="ctrl.newItem.article.name" md-highlight-flags="^i">{{article.name}}</span>
            </md-item-template>
        </md-autocomplete>
    </form>
    <md-list ng-cloak>
        <ng-include ng-repeat="item in list.items | orderBy: 'article.name' track by $index" 
             src="'/app/item/item.html'"
             ng-controller="itemController">
        </ng-include>
    </md-list>
    <ng-include class="padding-content" ng-if="list.items.length == 0" src="'app/lists/view/emptyList.html'"></ng-include>
</div>